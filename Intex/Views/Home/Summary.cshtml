
@{
    ViewData["Title"] = "Summary";
}

@model PaginatedList<Crash>


<h1>Crash Data</h1>
<br />
@*
    <select asp-for="CategoryId" required>
        <option value="">Select Category</option>
        @foreach (Category c in ViewBag.Categories)
        {
            <option value="@c.CategoryId">@c.CategoryName</option>
        }
    </select>
    <option value="@ViewData["CountyFilter"]">@Html.DisplayFor(x => item)</option>
*@
<form asp-action="Summary" method="get">
    <div class="form-actions no-color">

        @*select counties*@
        <select name="CountySearchID">
            <option value="">Select County</option>
            <option value="1">BEAVER</option>
            <option value="2">BOX ELDER</option>
            <option value="3">CACHE</option>
            <option value="4">CARBON</option>
            <option value="5">DAGGETT</option>
            <option value="6">DAVIS</option>
            <option value="7">DUCHESNE</option>
            <option value="8">EMERY</option>
            <option value="9">GARFIELD</option>
            <option value="10">GRAND</option>
            <option value="11">IRON</option>
            <option value="12">JUAB</option>
            <option value="13">KANE</option>
            <option value="14">MILLARD</option>
            <option value="15">MORGAN</option>
            <option value="16">PIUTE</option>
            <option value="17">RICH</option>
            <option value="18">SALT LAKE</option>
            <option value="19">SAN JUAN</option>
            <option value="20">SANPETE</option>
            <option value="21">SEVIER</option>
            <option value="22">SUMMIT</option>
            <option value="23">TOOELE</option>
            <option value="24">UINTAH</option>
            <option value="25">UTAH</option>
            <option value="26">WASATCH</option>
            <option value="27">WASHINGTON</option>
            <option value="28">WAYNE</option>
            <option value="29">WEBER</option>

        </select>
        <p>
            Find by keyword: <input type="text" name="SearchString" value="@ViewData["CurrentFilter"]" />
            <input type="submit" value="Search" class="btn btn-primary" />
            <br />
            <a asp-action="Summary">Back to Full List</a>
        </p>

    </div>
</form>


    @foreach (County c in ViewBag.Counties)
    {
        <p>@c.COUNTY_NAME</p>
    }

<table class="table">



    <thead>
        <tr>

            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["DateSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Date</a>
            </th>
            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["CountyIDSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">County</a>
            </th>
            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["RouteSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Route</a>
            </th>
            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["MPSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Mile Point</a>
            </th>
            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["LatSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Latitude</a>
            </th>
            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["LonSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Longitude</a>
            </th>
            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["RoadSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Road Name</a>
            </th>
            <th>
                <a asp-action="Summary" asp-route-sortOrder="@ViewData["SLSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Severity Level</a>
            </th>

            <th></th>
        </tr>
    </thead>
    <tbody>



        @{
            int i = 0;


            foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.CRASH_DATETIME)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.COUNTY_ID)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ROUTE)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.MILEPOINT)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.LAT_UTM_Y)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.LONG_UTM_X)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.MAIN_ROAD_NAME)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CRASH_SEVERITY_ID)
                    </td>

                </tr>

                i++;
                if (i == 10)
                {
                    break;
                }
            }
        }
    </tbody>
</table>

@{
    var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
    var nextDisabled = !Model.HasNextPage ? "disabled" : "";
}
<br />
<p>Page @Model.PageIndex out of @Model.TotalPages</p>
<br />
<a asp-action="Summary"
   asp-route-sortOrder="@ViewData["CurrentSort"]"
   asp-route-pageNumber="@(Model.PageIndex - 1)"
   asp-route-currentFilter="@ViewData["CurrentFilter"]"
   class="btn btn-default border-primary @prevDisabled">
    Previous
</a>
<a asp-action="Summary"
   asp-route-sortOrder="@ViewData["CurrentSort"]"
   asp-route-pageNumber="@(Model.PageIndex + 1)"
   asp-route-currentFilter="@ViewData["CurrentFilter"]"
   class="btn btn-default border-primary @nextDisabled">
    Next
</a>
